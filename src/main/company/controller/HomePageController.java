package company.controller;

import company.entity.User.AuthUser;
import company.repository.UserRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.annotation.AuthenticationPrincipal;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HomePageController {
    @Autowired
    private UserRepository userRepository;

    @GetMapping("/homepage")
    public String main(Model model, @AuthenticationPrincipal AuthUser user) {
        String scr = user.getUser().getUserPhoto();
        if (scr==null) {
            user.getUser().setUserPhoto("data:image/jpeg;base64,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");
        }
        model.addAttribute("scr", scr);
        model.addAttribute("user", user);
        return "homepage";
    }
}
